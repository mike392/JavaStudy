package com.study.parser.parser;

import java.io.IOException;
import java.util.Set;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.XMLReaderFactory;
import com.study.parser.entity.Medicine;

public class MedicineSAXBuilder {
	private Set<Medicine> medicines;
	private MedicineHandler sh;
	private XMLReader reader;

		public MedicineSAXBuilder() {
		// создание SAX-анализатора
			sh = new MedicineHandler();
			try {
		// создание объекта-обработчика
				reader = XMLReaderFactory.createXMLReader();
				reader.setContentHandler(sh);
			} catch (SAXException e) {
				System.err.print("ошибка SAX парсера: " + e);
			}
		}
		
		public Set<Medicine> getMedicines() {
			return medicines;
		}
		
		public void buildSetMedicines(String fileName) {
			try {
			// разбор XML-документа
				reader.parse(fileName);
			} catch (SAXException e) {
				System.err.print("ошибка SAX парсера: " + e);
			} catch (IOException e) {
				System.err.print("ошибка I/О потока: " + e);
			}
			medicines = sh.getMedicines();
		}
	}

